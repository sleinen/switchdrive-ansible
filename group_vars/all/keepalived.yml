---

keepalived:
  # drive
  drive-lb1:
    - { name: 'vip1_1', interface: 'ens3', state: 'MASTER', priority: 150, router_id: 10, ip: "{{ hostvars[groups['lb_vip'][0]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", track_script: "chk_haproxy" }
    - { name: 'vip1_2', interface: 'ens3', state: 'BACKUP', priority:  50, router_id: 11, ip: "{{ hostvars[groups['lb_vip'][1]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", track_script: "chk_haproxy" }
  drive-lb2:
    - { name: 'vip2_1', interface: 'ens3', state: 'BACKUP', priority:  50, router_id: 10, ip: "{{ hostvars[groups['lb_vip'][0]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", track_script: "chk_haproxy" }
    - { name: 'vip2_2', interface: 'ens3', state: 'MASTER', priority: 150, router_id: 11, ip: "{{ hostvars[groups['lb_vip'][1]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", track_script: "chk_haproxy" }

  drive-graphite1:
    - { name: 'vip1',   interface: 'ens3', state: 'MASTER', priority: 150, router_id: 12, ip: "{{ hostvars[groups['carbon_vip'][0]].inventory_hostname }}", private_ip: "{{ hostvars[groups['graphite'][0]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['graphite'][1]].inventory_hostname }}", track_script: "chk_carbon" }
  drive-graphite2:
    - { name: 'vip2',   interface: 'ens3', state: 'BACKUP', priority:  50, router_id: 12, ip: "{{ hostvars[groups['carbon_vip'][0]].inventory_hostname }}", private_ip: "{{ hostvars[groups['graphite'][1]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['graphite'][0]].inventory_hostname }}", track_script: "chk_carbon" }

  # sldrive
  sldrive-lb1:
    - { name: 'vip1_1', interface: 'ens3', state: 'MASTER', priority: 150, router_id: 10, ip: "{{ hostvars[groups['lb_vip'][0]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", track_script: "chk_haproxy" }
    - { name: 'vip1_2', interface: 'ens3', state: 'BACKUP', priority:  50, router_id: 11, ip: "{{ hostvars[groups['lb_vip'][1]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", track_script: "chk_haproxy" }
  sldrive-lb2:
    - { name: 'vip2_1', interface: 'ens3', state: 'BACKUP', priority:  50, router_id: 10, ip: "{{ hostvars[groups['lb_vip'][0]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", track_script: "chk_haproxy" }
    - { name: 'vip2_2', interface: 'ens3', state: 'MASTER', priority: 150, router_id: 11, ip: "{{ hostvars[groups['lb_vip'][1]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", track_script: "chk_haproxy" }

  # tldrive
  tldrive-lb1:
    - { name: 'vip1_1', interface: 'ens3', state: 'MASTER', priority: 150, router_id: 10, ip: "{{ hostvars[groups['lb_vip'][0]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", track_script: "chk_haproxy" }
    - { name: 'vip1_2', interface: 'ens3', state: 'BACKUP', priority:  50, router_id: 11, ip: "{{ hostvars[groups['lb_vip'][1]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", track_script: "chk_haproxy" }
  tldrive-lb2:
    - { name: 'vip2_1', interface: 'ens3', state: 'BACKUP', priority:  50, router_id: 10, ip: "{{ hostvars[groups['lb_vip'][0]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", track_script: "chk_haproxy" }
    - { name: 'vip2_2', interface: 'ens3', state: 'MASTER', priority: 150, router_id: 11, ip: "{{ hostvars[groups['lb_vip'][1]].inventory_hostname }}", private_ip: "{{ hostvars[groups['lb'][1]].inventory_hostname }}", peer_ip: "{{ hostvars[groups['lb'][0]].inventory_hostname }}", track_script: "chk_haproxy" }
